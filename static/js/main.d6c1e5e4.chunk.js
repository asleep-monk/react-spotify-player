(this["webpackJsonpreact-spotify-player"]=this["webpackJsonpreact-spotify-player"]||[]).push([[0],{36:function(e,t,n){e.exports=n(75)},47:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(30),c=n(15),o=n.n(c),s=n(2);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(11),u=n(10),p=Object(l.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"GET_USER"===t.type?Object(u.a)(Object(u.a)({},e),t.payload):"LOGOUT"===t.type?{}:e},logged:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"ISLOGGED"===t.type||"LOGIN"===t.type||"LOGOUT"===t.type?t.payload:e},playlists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"GET_PLAYLISTS"===t.type?Object(u.a)(Object(u.a)({},e),t.payload):"LOGOUT"===t.type?{}:e},device_id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"SET_DEVICE_ID"===t.type?t.payload:e},home:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"GET_HOME"===t.type?Object(u.a)(Object(u.a)({},e),t.payload):e},uri:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"home",t=arguments.length>1?arguments[1]:void 0;return"SET_VIEW"===t.type?t.payload:e},view:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"GET_VIEW"===t.type?t.payload:e},player:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"GET_PLAYER"===t.type?t.payload:e},featured_paylists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"GET_FEATURED_PLAYLISTS"===t.type?Object(u.a)(Object(u.a)({},e),t.payload):e},current_state:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"SET_CURRENT_STATE"===t.type?t.payload:e}}),m=n(3),d=n(4),f=n(6),v=n(5),h=(n(47),n(1)),y=n.n(h),g=n(13),b=n(9),k=function(){return{access_token:localStorage.getItem("access_token"),token_type:localStorage.getItem("token_type")}},E=function(){var e=JSON.parse(localStorage.getItem("expires_at"));return e&&(new Date).valueOf()<e},_=function(e,t){var n=t.indexOf(e),a=[],r=[],i=!1;return t.forEach((function(e,t){t===n&&(i=!0),i?r.includes(e)||r.push(e):a.push(e)})),a.forEach((function(e){r.push(e)})),r},w=function(e){var t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return"".concat(t,":").concat(n<10?"0":"").concat(n)},O=n(7),j=n.n(O),x=function(){return j.a.get("https://api.spotify.com/v1/browse/featured-playlists?country=JP&limit=12",{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(k().access_token)}})},N=function(e){var t=e.uri.split(":");return j.a.get("https://api.spotify.com/v1/albums/"+t[t.length-1],{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(k().access_token)}})},S=function(e){var t=e.uri.split(":");return j.a.get("https://api.spotify.com/v1/playlists/".concat(t[t.length-1],"/images"),{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(k().access_token)}})},T=function(e){var t=e.uri.split(":");return j.a.get("https://api.spotify.com/v1/playlists/".concat(t[t.length-1],"/tracks"),{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(k().access_token)}})},I=function(e){var t=e.uri.split(":");return j.a.get("https://api.spotify.com/v1/playlists/"+t[t.length-1],{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(k().access_token)}})},z=function(e){var t=e.uri.split(":");return j.a.get("https://api.spotify.com/v1/artists/".concat(t[t.length-1],"/top-tracks?country=BR"),{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(k().access_token)}})},C=function(e){var t=e.uri.split(":");return j.a.get("https://api.spotify.com/v1/artists/"+t[t.length-1],{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(k().access_token)}})},P=function(e){if(!e)return!1;var t=e.reduce((function(e,t){return e+t.duration_ms}),0);return w(t)},A=function(){var e=Object(b.a)(y.a.mark((function e(t){var n,a,r,i,c,o,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a={playlist:T({uri:t}),playlistInfo:I({uri:t}),playlistCover:S({uri:t})},e.next=4,Promise.all(Object.values(a));case 4:return r=e.sent,i=Object(g.a)(r,3),c=i[0],o=i[1],s=i[2],n.type="playlist",n.images=s.data,n.id=c.data.id,n.tracks=c.data.items.map((function(e){return e.track})).filter((function(e){return e})),n.total_duration=P(n.tracks),n.owner=o.data.owner,n.followers=o.data.followers.total,n.name=o.data.name,n.description=o.data.description,n.public=o.data.public,n.tracks=n.tracks.map((function(e){return{id:e.id,name:e.name,duration_ms:w(e.duration_ms),album:e.album,artists:e.artists,uri:e.uri}})),n.table={head:["name","artist","album","duration"],body:n.tracks},e.abrupt("return",n);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(b.a)(y.a.mark((function e(t){var n,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,N({uri:t});case 3:return a=e.sent,r=a.data,n.type="album",n.tracks=r.tracks.items.filter((function(e){return e})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(b.a)(y.a.mark((function e(t){var n,a,r,i,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,C({uri:t});case 3:return a=e.sent,r=a.data,e.next=7,z({uri:t});case 7:return i=e.sent,c=i.data,n.type="artist",n.name=r.name,n.images=r.images,n.tracks||(n.tracks=c.tracks,n.total_duration=P(n.tracks)),n.tracks=n.tracks.map((function(e){return{id:e.id,name:e.name,duration_ms:w(e.duration_ms),uri:e.uri}})),n.table={head:["name","duration"],body:n.tracks},e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(b.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.uri).split(":").indexOf("album")>=0)){e.next=7;break}return e.next=4,L(n);case 4:a=e.sent,e.next=17;break;case 7:if(!(n.split(":").indexOf("playlist")>=0)){e.next=13;break}return e.next=10,A(n);case 10:a=e.sent,e.next=17;break;case 13:if(!(n.split(":").indexOf("artist")>=0)){e.next=17;break}return e.next=16,V(n);case 16:a=e.sent;case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e){console.log(e);try{fetch("https://api.spotify.com/v1/me/player/previous",{method:"POST",headers:{"content-type":"application/json",authorization:"".concat(k().token_type," ").concat(k().access_token)}})}catch(t){R({uri:e})}},G=function(){fetch("https://api.spotify.com/v1/me/player/next",{method:"POST",headers:{"content-type":"application/json",authorization:"".concat(k().token_type," ").concat(k().access_token)}})},U=function(){fetch("https://api.spotify.com/v1/me/player/pause",{method:"PUT",headers:{"content-type":"application/json",authorization:"".concat(k().token_type," ").concat(k().access_token)}})},F=function(){var e=Object(b.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.device_id,console.log(n),fetch("https://api.spotify.com/v1/me/player/play?device_id=".concat(n),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(k().access_token)}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(b.a)(y.a.mark((function e(t){var n,a,r,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.uri,a=t.uris,r=t.device_id,i=_(n,(a||[]).map((function(e){return e.uri}))),fetch("https://api.spotify.com/v1/me/player/play?device_id=".concat(r),{method:"PUT",body:JSON.stringify({uris:i||[n]}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(k().access_token)}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M={init:function(e){var t=e.setDeviceId;console.log("____init___");var n=new window.Spotify.Player({playerInstance:new window.Spotify.Player({name:"Kenjicas Player"}),name:"Kenjicas Player",getOAuthToken:function(e){return e(k().access_token)}});return n.setDeviceId=t,n.play=R,n.next=G,n.previous=B,n.pause=U,n.resume=F,n},getView:D},W=function(e){return function(){var t=Object(b.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(e||{}).uri&&window.localStorage.setItem("last_uri",e.uri),n({type:"SET_VIEW",payload:(e||{}).uri||"home"});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Y=function(e){var t=e.uri;return function(){var e=Object(b.a)(y.a.mark((function e(n){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.getView({uri:t});case 2:a=e.sent,n({type:"GET_VIEW",payload:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},H=function(){return function(e){localStorage.removeItem("access_token"),localStorage.removeItem("token_type"),localStorage.removeItem("expires_in"),localStorage.removeItem("expires_at"),console.log("removesession"),e({type:"LOGOUT",payload:{status:!1,access_token:!1}})}},J=(n(65),n(66),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.getHome()}},{key:"renderAlbums",value:function(e){var t=this;return r.a.createElement("div",{className:"album col-sm-3",onClick:function(){t.props.setView({uri:e.uri})},key:e.id},r.a.createElement("div",{className:"image",style:{backgroundImage:"url(".concat(e.images.length&&e.images[0].url,")"),backgroundSize:"cover",backgroundPosition:"center center"}}),r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-title"},e.name),r.a.createElement("small",{className:"card-text"},e.description)))}},{key:"renderRow",value:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null," ",e.message," "),r.a.createElement("div",{className:"albums-row",key:e.type},e.items.map(this.renderAlbums.bind(this))))}},{key:"render",value:function(){return Object.keys(this.props.home).length?r.a.createElement("div",{className:"home"},Object.values(this.props.home).map(this.renderRow.bind(this))):r.a.createElement("div",{className:"home"},"Loading...")}}]),n}(r.a.Component)),K=Object(s.b)((function(e){return{home:e.home}}),{getHome:function(){return function(){var e=Object(b.a)(y.a.mark((function e(t){var n,a,r,i,c,o,s,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[j.a.get("https://api.spotify.com/v1/me/player/recently-played",{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(k().access_token)}}),x(),j.a.get("https://api.spotify.com/v1/me/top/artists",{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(k().access_token)}})],e.next=3,Promise.all(Object.values(n));case 3:a=e.sent,r=Object(g.a)(a,3),i=r[0].data,c=r[1].data,o=r[2].data,s=function(e){return{message:e.message,items:e.playlists.items,type:"playlists"}},l=function(e){return{message:"Top Artists",items:e.items,type:"top-artists"}},t({type:"GET_HOME",payload:{recentlyTracks:function(e){var t=[],n=e.items.map((function(e){return e.track.album}));return n=n.filter((function(e){return!t.includes(e.id)&&(t.push(e.id),e)})),{next:e.next,limit:e.limit,href:e.href,message:"Recently Played",items:n,type:"recently-played"}}(i),featuredPlaylists:s(c),top_artists:l(o)}});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setView:W})(J),$=(n(67),n(16)),q=n(17);function Q(){var e=Object($.a)(['\n        padding: 10px 0;\n        margin-bottom: 15px;\n\n        img {\n            width: 220px;\n        }\n\n        .info {\n            align-self: flex-end;\n            padding: 0 10px;\n            p { margin: 0; }\n            .info-type {\n                position: relative;\n                top: 5px;\n                text-transform: uppercase;\n                font-weight: 300;\n                font-size: 15px;\n            }\n            .info-name {\n                font-size: 48px;\n                font-weight: 600;\n                margin-bottom: 0;\n            }\n            .info-description {\n                max-width: 500px;\n            }\n            .info-details {\n                padding: 14px 0;\n            }\n            .info-tracks {\n                margin-right: 4px;\n            }\n            .info-owner {\n                &:after {\n                    content:"*";\n                    padding: 0 6px;\n                }\n            }\n        }\n\n        .info-interactive {\n            .play {\n                cursor: pointer;\n                background: #1DB954;\n                border-radius: 15px;\n                font-size: 11px;\n                letter-spacing: 2px;\n                font-weight: bold;\n                width: 106px;\n                padding: 4px;\n                text-align: center;\n            }\n        }\n']);return Q=function(){return e},e}var X=q.a.div(Q()),Z=function(e){var t=e.props,n=t.tracks,a=t.images,i=t.name,c=t.description,o=t.owner,s=t.total_duration,l=t.type;return r.a.createElement(X,{className:"row"},a.length&&a[0].url&&r.a.createElement("div",{className:"artwork col-auto d-none d-lg-block"},r.a.createElement("img",{src:a[0].url,alt:i||""})),r.a.createElement("div",{className:"col info d-flex flex-column"},r.a.createElement("strong",{className:"info-type"},l),r.a.createElement("h3",{className:"info-name"},i),r.a.createElement("span",{className:"info-description"},c),r.a.createElement("div",{className:"info-details"},r.a.createElement("span",{className:"info-owner"},"Created by ",r.a.createElement("strong",null,(o||{}).display_name)),r.a.createElement("span",{className:"info-tracks"},(n||[]).length," songs,"),r.a.createElement("span",{className:"info-duration"},s)),r.a.createElement("div",{className:"info-interactive"},r.a.createElement("div",{className:"play"}," PLAY "))))},ee=(n(68),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).state={filteredItems:[]},a}return Object(d.a)(n,[{key:"setArtist",value:function(e){var t=this,n=e.artist,a=e.total,i=e.index,c=n.id,o=n.uri,s=n.name;return r.a.createElement("span",{key:c+"#"+i,onClick:function(e){e.stopPropagation(),t.props.setView({uri:o})}},a>1&&i!==a-1?"".concat(s,", "):s)}},{key:"setAlbum",value:function(e,t){e.stopPropagation(),this.props.setView({uri:t.album.uri})}},{key:"renderList",value:function(e,t){var n=this;return r.a.createElement("tr",{key:e.id+"#"+t,onClick:function(){n.props.device_id&&n.props.player.play({uri:e.uri,uris:n.props.view.tracks,device_id:n.props.device_id})}},r.a.createElement("td",null,r.a.createElement("span",null,r.a.createElement("i",{className:"play fas fa-play"}))),e.name&&r.a.createElement("td",null,r.a.createElement("span",null,e.name)),e.artists&&r.a.createElement("td",null,r.a.createElement("span",{className:"link"},e.artists&&Object.values(e.artists).map((function(t,a){return n.setArtist({artist:t,total:(e.artists||[]).length,index:a})})))),e.album&&r.a.createElement("td",null,r.a.createElement("span",{className:"link",onClick:function(t){return n.setAlbum(t,e)}}," ",e.album.name," ")),e.duration_ms&&r.a.createElement("td",null,r.a.createElement("span",null," ",e.duration_ms," ")))}},{key:"onFilter",value:function(e){this.setState({filteredItems:this.props.view.table.body.filter((function(t){return t.name.toLowerCase().replace("\xe3","a").indexOf(e.target.value.toLowerCase())>-1}))})}},{key:"render",value:function(){var e=this;return this.props.view.tracks?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tracklist"},r.a.createElement("div",{className:"filter"},r.a.createElement("input",{type:"text",placeholder:"Filter",onChange:function(t){e.onFilter(t)}})),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"header"},r.a.createElement("th",{scope:"col"}),this.props.view.table.head.map((function(e){return r.a.createElement("th",{key:e},e)})))),r.a.createElement("tbody",null,((this.state.filteredItems||[]).length>0?this.state.filteredItems:this.props.view.table.body).map((function(t,n){return e.renderList(t,n)})))))):r.a.createElement(r.a.Fragment,null," Loading... ")}}]),n}(r.a.Component)),te=Object(s.b)((function(e){return{player:e.player}}),{setView:W})(ee),ne=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentWillMount",value:function(){this.props.getView({uri:this.props.uri})}},{key:"UNSAFE_componentWillUpdate",value:function(e){((e.view||{}).tracks||[]).length&&((this.props.view||{}).tracks||[]).length&&this.props.uri!==e.uri&&this.props.getView({uri:e.uri})}},{key:"render",value:function(){var e=this.props.view.tracks,t=this.props,n=t.view,a=t.device_id;return e?r.a.createElement("div",{className:"playlist"},r.a.createElement(Z,{props:n}),r.a.createElement(te,{view:n,device_id:a})):r.a.createElement(r.a.Fragment,null,"loading")}}]),n}(r.a.Component),ae=Object(s.b)((function(e){return{uri:e.uri,view:e.view,device_id:e.device_id}}),{getView:Y,setView:W})(ne),re=(n(69),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentWillMount",value:function(){this.props.getView({uri:this.props.uri})}},{key:"componentDidUpdate",value:function(e){((e.view||{}).tracks||[]).length&&((this.props.view||{}).tracks||[]).length&&this.props.uri!==e.uri&&this.props.getView({uri:e.uri})}},{key:"render",value:function(){var e=this.props.view.tracks,t=this.props,n=t.view,a=t.device_id;return e?r.a.createElement("div",{className:"artist"},r.a.createElement(Z,{props:n}),r.a.createElement(te,{view:n,limit:"5",device_id:a}),r.a.createElement("button",null,"show more")):r.a.createElement(r.a.Fragment,null,"loading")}}]),n}(r.a.Component)),ie=Object(s.b)((function(e){return{uri:e.uri,view:e.view,device_id:e.device_id}}),{getView:Y,setView:W})(re),ce=function(e){var t=e.uri;return r.a.createElement(r.a.Fragment,null,e.uri.indexOf("album")>=0?"album":t.indexOf("artist")>=0?r.a.createElement(ie,null):t.indexOf("playlist")>=0?r.a.createElement(ae,null):t.indexOf("home")>=0?r.a.createElement(K,null):"TRISTE")},oe=n(35),se=n.n(oe);function le(){var e=Object($.a)(["\n    @font-face {\n        font-family: 'Cooper Black';\n        src: url(",'/assets/cooper_black.ttf);\n    }\n\n    display:flex;\n    align-items: center;\n    justify-content: center;\n    overflow: hidden;\n    font-family: "Cooper Black";\n    background: rgba(28,28,28);\n    border: 2em solid #ffffff;\n    color: #fff;\n    overflow: none;\n    height: 100vh;\n    text-align: center;\n\n    .title {\n        padding: 20px;\n        font-size: 2em;\n        p {\n            font-size: 22px;\n        }\n    }\n\n    .btn {\n        border: 1px solid #ffffff;\n        font-size: 17px;\n        color: #ffffff;\n    }\n']);return le=function(){return e},e}var ue=q.a.div(le(),"."),pe=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"onSuccess",value:function(e){this.props.login(e)}},{key:"onFailure",value:function(e){console.log("fail",e)}},{key:"logout",value:function(){this.props.logout()}},{key:"render",value:function(){var e=this;return r.a.createElement(ue,{style:{backgroundImage:"url('".concat(".","/assets/background.jpg')"),backgroundSize:"cover"}},r.a.createElement("div",{className:"login container"},r.a.createElement(se.a,{className:"btn",clientId:"38a9d82012ce4dcc81269de4479a74fa",redirectUri:"https://kenjikatahira.github.io/react-spotify-player/",onSuccess:function(t){e.onSuccess(t)},onFailure:this.onFailure,scope:"user-read-private user-library-read user-read-playback-state user-read-playback-position user-modify-playback-state user-top-read user-read-recently-played streaming user-read-email"})))}}]),n}(r.a.Component),me=Object(s.b)((function(e){return{user:e.user}}),{login:function(e){return function(t){!function(e){var t=e.access_token,n=e.token_type,a=e.expires_in,r=(new Date).valueOf()+36e5;localStorage.setItem("access_token",t),localStorage.setItem("token_type",n),localStorage.setItem("expires_in",a),localStorage.setItem("expires_at",r),console.log("setsession")}(e),t({type:"LOGIN",payload:{status:!0,access_token:k().access_token}})}},logout:H})(pe),de=(n(70),n(71),function(e){var t=e.playlists,n=e.setView,a=e.uri,i=(e.logout,e.getPlaylists);!Object.keys(t).length&&i&&i();var c=[{name:"Home",uri:"home",icon:r.a.createElement("i",{className:"home fas fa-home"},"home")},{name:"Browse",uri:"browse",icon:r.a.createElement("i",{className:"fa fa-folder-open","aria-hidden":"true"})},{el:r.a.createElement("li",{key:"your-library",className:"lead"}," Your Library ")},{name:"Recently Played",uri:"recently-played"},{name:"Liked Songs",uri:"liked-songs"},{name:"Albums",uri:"albums"},{name:"Bands",uri:"bands"},{name:"Podcasts",uri:"podcasts"},{el:r.a.createElement("li",{key:"lead-playlists",className:"lead"}," Playlists ")}],o=function(e){var t=(e||{}.owner).display_name;return e.el?e.el:r.a.createElement("li",{key:e.uri,className:a===e.uri?"active":"","data-owner":t?"* by ".concat(t):"",id:e.uri,onClick:function(){return n({uri:e.uri})}},e.icon?e.icon:""," ",e.name)};return(t.items||[]).length?r.a.createElement("ul",{className:"menu"},r.a.createElement("svg",{viewBox:"0 0 1134 340",class:"spotify-logo"},r.a.createElement("path",{fill:"currentColor",d:"M8 171c0 92 76 168 168 168s168-76 168-168S268 4 176 4 8 79 8 171zm230 78c-39-24-89-30-147-17-14 2-16-18-4-20 64-15 118-8 162 19 11 7 0 24-11 18zm17-45c-45-28-114-36-167-20-17 5-23-21-7-25 61-18 136-9 188 23 14 9 0 31-14 22zM80 133c-17 6-28-23-9-30 59-18 159-15 221 22 17 9 1 37-17 27-54-32-144-35-195-19zm379 91c-17 0-33-6-47-20-1 0-1 1-1 1l-16 19c-1 1-1 2 0 3 18 16 40 24 64 24 34 0 55-19 55-47 0-24-15-37-50-46-29-7-34-12-34-22s10-16 23-16 25 5 39 15c0 0 1 1 2 1s1-1 1-1l14-20c1-1 1-1 0-2-16-13-35-20-56-20-31 0-53 19-53 46 0 29 20 38 52 46 28 6 32 12 32 22 0 11-10 17-25 17zm95-77v-13c0-1-1-2-2-2h-26c-1 0-2 1-2 2v147c0 1 1 2 2 2h26c1 0 2-1 2-2v-46c10 11 21 16 36 16 27 0 54-21 54-61s-27-60-54-60c-15 0-26 5-36 17zm30 78c-18 0-31-15-31-35s13-34 31-34 30 14 30 34-12 35-30 35zm68-34c0 34 27 60 62 60s62-27 62-61-26-60-61-60-63 27-63 61zm30-1c0-20 13-34 32-34s33 15 33 35-13 34-32 34-33-15-33-35zm140-58v-29c0-1 0-2-1-2h-26c-1 0-2 1-2 2v29h-13c-1 0-2 1-2 2v22c0 1 1 2 2 2h13v58c0 23 11 35 34 35 9 0 18-2 25-6 1 0 1-1 1-2v-21c0-1 0-2-1-2h-2c-5 3-11 4-16 4-8 0-12-4-12-12v-54h30c1 0 2-1 2-2v-22c0-1-1-2-2-2h-30zm129-3c0-11 4-15 13-15 5 0 10 0 15 2h1s1-1 1-2V93c0-1 0-2-1-2-5-2-12-3-22-3-24 0-36 14-36 39v5h-13c-1 0-2 1-2 2v22c0 1 1 2 2 2h13v89c0 1 1 2 2 2h26c1 0 1-1 1-2v-89h25l37 89c-4 9-8 11-14 11-5 0-10-1-15-4h-1l-1 1-9 19c0 1 0 3 1 3 9 5 17 7 27 7 19 0 30-9 39-33l45-116v-2c0-1-1-1-2-1h-27c-1 0-1 1-1 2l-28 78-30-78c0-1-1-2-2-2h-44v-3zm-83 3c-1 0-2 1-2 2v113c0 1 1 2 2 2h26c1 0 1-1 1-2V134c0-1 0-2-1-2h-26zm-6-33c0 10 9 19 19 19s18-9 18-19-8-18-18-18-19 8-19 18zm245 69c10 0 19-8 19-18s-9-18-19-18-18 8-18 18 8 18 18 18zm0-34c9 0 17 7 17 16s-8 16-17 16-16-7-16-16 7-16 16-16zm4 18c3-1 5-3 5-6 0-4-4-6-8-6h-8v19h4v-6h4l4 6h5zm-3-9c2 0 4 1 4 3s-2 3-4 3h-4v-6h4z"})),r.a.createElement("div",{className:"fixed-pages"},c.map((function(e){return o(e)}))),t.items.map((function(e){return o(e)}))):r.a.createElement("ul",{className:"menu"},r.a.createElement("div",{className:"fixed-pages"},c.map((function(e){return o(e)}))))}),fe=(n(72),n(73),function(e){var t=e.current_state.current_track,n=((((t||{}).album||{}).images||[])[0]||{}).url,a=(t||{}).name,i=(((t||{}).artists||[])[0]||{}).name;return r.a.createElement("div",{className:"playing"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:n,alt:n})),r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"track"},r.a.createElement("b",null,a)),r.a.createElement("div",{className:"playing-artist"},i)))}),ve=(n(74),function(e){var t=e.count,n=e.fixed;return r.a.createElement("div",{className:"timer"},n||t)}),he=function(e){var t=e.current_state,n=e.fixed,i=t.paused,c=t.position,o=t.current_track,s=Object(a.useState)({count:0,current_track:o}),l=Object(g.a)(s,2),u=l[0],p=l[1];(o||{}).id!==(u.current_track||{}).id&&p({count:0,current_track:o});var m=function(e){({start:function(){return setTimeout((function(){p({count:u.count+1e3,current_track:o})}),1e3)},stop:function(){({}).start&&clearTimeout((void 0).start)}})[e]()};return Object(a.useEffect)((function(){i||void 0===c?i&&m("stop"):m("start")})),r.a.createElement(ve,{count:function(e){var t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return"".concat(t,":").concat(n<10?"0":"").concat(n)}(u.count),fixed:n})},ye=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidUpdate",value:function(){this.props.player&&this.props.player.addListener&&!this.connected&&this.configurePlayer(this.props.player)}},{key:"onChange",value:function(e){this.props.setCurrentState(e)}},{key:"configurePlayer",value:function(e){e&&(e.addListener("ready",(function(t){var n=t.device_id;console.log("Ready - Device ID",n),e.setDeviceId(n)})),e.addListener("player_state_changed",this.onChange.bind(this)),e.connect(),this.connected=!0)}},{key:"togglePlayButton",value:function(){var e=this,t=this.props.current_state.paused;return void 0===t||t?r.a.createElement("button",{className:"btn btn-outline-secondary",onClick:function(){e.props.player.resume({device_id:e.props.device_id||""})}},r.a.createElement("i",{className:"fas fa-play"})):r.a.createElement("button",{className:"btn btn-outline-secondary",onClick:this.props.player.pause},r.a.createElement("i",{className:"fas fa-pause",onClick:this.props.player.pause}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.player,a=t.current_state;return this.props.device_id?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"controls"},r.a.createElement("div",{className:"playing-wrapper"},r.a.createElement(fe,{current_state:a})),r.a.createElement("div",{className:"inner-controls"},r.a.createElement(he,{current_state:a}),r.a.createElement("button",{className:"btn btn-outline-secondary",onClick:function(){n.previous(e.teste)}},r.a.createElement("i",{className:"fas fa-backward"})),this.togglePlayButton(),r.a.createElement("button",{className:"btn btn-outline-secondary",onClick:n.next},r.a.createElement("i",{className:"fas fa-forward"}))))):r.a.createElement("div",null,"Loading...")}}]),n}(r.a.Component),ge=Object(s.b)((function(e){return{device_id:e.device_id,player:e.player,current_state:e.current_state}}),{setCurrentState:function(e){return function(t){var n=e.position,a=e.duration,r=e.paused,i=e.shuffle,c=e.repeat_mode,o=e.track_window,s=o.current_track,l=o.next_tracks,u=o.previous_tracks;console.log(e),t({type:"SET_CURRENT_STATE",payload:{position:n,duration:a,paused:r,shuffle:i,repeat_mode:c,current_track:s,next_tracks:l,previous_tracks:u}})}}})(ye),be=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this)).initiated=!1,e}return Object(d.a)(n,[{key:"run",value:function(){var e=this.props,t=e.currentTrack,n=e.setDeviceId;this.props.getPlayer({currentTrack:t,setDeviceId:n}),this.initiated=!0}},{key:"UNSAFE_componentWillUpdate",value:function(){!this.initiated&&!0===this.props.logged.status&&this.run()}},{key:"componentDidMount",value:function(){var e=this;window.onSpotifyWebPlaybackSDKReady=function(){var t=window.localStorage.getItem("last_uri");e.props.setView(t?{uri:t}:"")}}},{key:"onSearchChange",value:function(e){console.log(e)}},{key:"render",value:function(){var e=this.props,t=e.logged,n=e.uri,a=e.tracks,i=e.getPlaylists,c=e.logout,o=e.setView,s=e.playlists;return t.status?r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"menu-wrapper"},r.a.createElement(de,{getPlaylists:i,logout:c,setView:o,playlists:s,uri:n})),r.a.createElement("div",{className:"browser-wrapper"},r.a.createElement("div",{className:"browser-inner-wrapper"},r.a.createElement(ce,{uri:n,tracks:a}))),r.a.createElement("div",{className:"controls-wrapper"},r.a.createElement(ge,null))):r.a.createElement(me,null)}}]),n}(r.a.Component),ke=Object(s.b)((function(e){return{user:e.user,logged:e.logged,playlists:e.playlists,uri:e.uri,device_id:e.device_id}}),{logout:H,getUser:function(){return function(e){j.a.get("https://api.spotify.com/v1/me",{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(k().access_token)}}).then((function(t){e({type:"GET_USER",payload:t.data})}))}},getPlaylists:function(){return function(e){j.a.get("https://api.spotify.com/v1/me/playlists?limit=50&offset=0",{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(k().access_token)}}).then((function(t){var n=t.data;e({type:"GET_PLAYLISTS",payload:n})}))}},setView:W,setDeviceId:function(e){return function(t){t({type:"SET_DEVICE_ID",payload:e})}},getPlayer:function(e){var t=e.currentTrack,n=e.setDeviceId;return function(e){e({type:"GET_PLAYER",payload:M.init({currentTrack:t,setDeviceId:n})})}}})(be),Ee=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.isLogged()}},{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(ke,null))}}]),n}(r.a.Component),_e=Object(s.b)((function(e){return{logged:e.logged}}),{isLogged:function(){return function(e){e({type:"ISLOGGED",payload:{status:E(),access_token:k().access_token}})}}})(Ee),we=Object(l.d)(p,Object(l.a)(i.a));o.a.render(r.a.createElement(s.a,{store:we},r.a.createElement(_e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.d6c1e5e4.chunk.js.map